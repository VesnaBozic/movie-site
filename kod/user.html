<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Welcome to WD MOVIES">
    <meta name="keywords" content="movie, movies,film, films, online cine, rent a movie, rent a film, buy a movie">
    <link rel="stylesheet" href="movies.css">
    <link rel="shortcut icon" href="/posteri/icon.png">
    <title>WD movies</title>
</head>

<body>
    <header>
        <nav id="navbar">
            <div class="container">
                <h1 class="logo"><a href="user.html">WDM</a></h1>
                <ul>
                    <li><a href="userSearch.html">Search movies</a></li>
                    <li><a href="searchDirector.html">Search director</a></li>
                    <li><a href="directors.html">All Directors</a></li>
                    <li><a href="myMovies.html">My movies</a></li>
                    <li><a href="myProfile.html">My profile</a></li>
                    <li><a href="index.html">Log out</a></li>
                </ul>
            </div>
        </nav>
    </header>
   <script src="user.js"></script>
    
<script>
    let imgs = document.querySelectorAll('.img-box');
function ls(i) {
    localStorage.setItem("counterImg", i)
}
for (let i=0; i<imgs.length; i++) {
   
   imgs[i].addEventListener("click",() => {ls(i)});
}

let carts = document.querySelectorAll('.cart');

function sM(i) {
    let loggedUser = JSON.parse(localStorage.getItem('loggedUser'));
    for(let n=0; n<loggedUser.myMovies.length; n++){
        if(loggedUser.myMovies[n] == i) {
            alert("You already bouth this movie!");
            return;
         }}
    loggedUser.myMovies.push(i);
    localStorage.setItem("loggedUser", JSON.stringify(loggedUser));
    let users = JSON.parse(localStorage.getItem("users"));

   
    for(a=0; a<users.length; a++) {
        if(loggedUser.username == users[a].username && loggedUser.password == users[a].password){
          
          
         users[a].myMovies.push(i);
         localStorage.setItem("users", JSON.stringify(users));}}

    
    
    location.replace("myMovies.html");
}
for (let i=0; i<carts.length; i++) {
   
   carts[i].addEventListener("click",() => {sM(i)});
}


</script>

</body>

</html>